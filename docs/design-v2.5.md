目前我们已经有生成模块的能力了。
现在需要基于模块的详细设计，进行总体文档的生成。
总体文档的章节：

1. 概述
讲清楚本服务或组件在整个系统中的定位、核心职责与价值。描述其与上下游系统或组件的核心交互关系。

2. 功能清单
基于架构、系统设计拆解出的功能进行全量描述。
功能清单	功能说明	优先级
创建主机	基于网络与规格元数据，注入配置、下载镜像、配置网络、构建主机	高
删除主机	删除主机对应的资源与主机实例	高
关闭主机	关机	中
...	...	...


3. 实现模型
3.1 上下文视图
3.2 服务/组件总体架构
3.2.1 服务/组件架构视图
使用高层级的框图展示服务内部的核心模块构成，以及模块之间的依赖和交互关系。
3.2 模块详细设计
3.2.1 XXX模块详细设计（包括模块介绍、功能描述、代码结构、关键算法逻辑、设计模式、关键数据结构等）
这章节包含所有模块的详细设计
3.3 软件分层设计 (可选)

4. 接口设计
4.1 总体设计
4.2 接口清单
5. 数据模型
5.1 设计目标
5.2 模型实现（ER图）
6. 算法实现
6.1 设计目标
6.2 算法实现
7 交互模型
7.1 设计目标
7.2 模型实现

每个关键要素都需要，各个模块的详细设计，结合现有的tools，设计整体文档生成的agent

要在全量智能体先要进行规划，依据当前项目的结构，调用大模型分析当前项目语言是什么，项目有哪些模块要去分析；
文件树、文件清单等tools要考虑结合语言进行过滤，每个语言单独定一个过滤文件，包括include、exclude的列表，还有通用的exclude列表
相关的中间内容都要保存，保存文件名需要包括agent、model、时间

先生成设计文档，先不给代码；


好的，这是一个非常棒的迭代方向，从单一模块分析升级到全项目文档的智能生成。这需要一个更高层次的编排（Orchestration）逻辑，我们可以称之为“文档生成总控代理”（Documentation Orchestrator Agent）。
这个总控代理将分步执行任务：规划 -> 逐一执行 -> 综合。
规划（Planning）: 分析项目结构，确定编程语言和核心模块。
执行（Execution）: 对每个识别出的核心模块，调用我们现有的 Map-Reduce 代理（runMapReduceAgent）来生成详细的模块设计文档。
综合（Synthesis）: 收集所有模块的分析结果和项目概况，调用一个新的“综合代理”（Synthesizer Agent），按照您提供的模板生成最终的总体设计文档。
为了实现这个目标，我们需要进行以下修改和添加：
新增 GetAllFilesContentTool: fileSystemTools.ts 中需要一个新工具，可以递归获取一个目录下所有文件的内容。这对于 Map-Reduce 代理在分析整个模块时非常有用。
增强文件系统工具: GetDirectoryTreeTool 和新的 GetAllFilesContentTool 需要支持按语言类型进行文件过滤。
重构 agentOrchestrator.ts: 将 runMapReduceAgent 的核心逻辑提取出来，使其可以被其他代码以编程方式调用，而不仅仅是通过 codewiki.runAgent 命令。
创建新的代理:
PlannerAgent: 一个简单的代理，用于分析文件树并输出项目语言和模块列表。
SynthesizerAgent: 一个代理，用于接收所有中间产物并生成最终文档。
创建总控流程 (documentationOrchestrator.ts): 这是所有逻辑的核心，它将编排上述所有代理和工具的调用。
注册新命令 (extension.ts): 添加一个新的 VS Code 命令，例如 codewiki.generateProjectDocumentation，来启动整个流程。